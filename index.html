<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>íƒ€ì ì—°ìŠµ ê²Œì„</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background: #f4f4f4;
      padding: 40px;
      overflow: hidden;
    }
    #word {
      font-size: 2rem;
      color: #2c3e50;
      margin: 20px 0;
      height: 50px;
      transition: transform 0.1s, filter 0.3s;
    }
    @keyframes shake {
      0% { transform: translateX(-5px); }
      25% { transform: translateX(5px); }
      50% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
      100% { transform: translateX(0); }
    }
    .shake {
      animation: shake 0.4s ease;
    }
    .fake-cursor {
      position: fixed;
      width: 20px;
      height: 20px;
      background-color: black;
      border-radius: 50%;
      z-index: 9999;
      top: 50%;
      left: -30px;
      transition: left 1.7s linear;
    }
    #playCount, #round, #inputBox, #result, #summary, #restartBtn {
      margin-top: 10px;
      font-size: 1rem;
    }
    #inputBox {
      padding: 10px;
      font-size: 1.2rem;
      width: 300px;
    }
    #restartBtn {
      padding: 10px 20px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      display: none;
    }
  </style>
</head>
<body>
  <h1>ğŸ¥‡ ë‚±ë§ íƒ€ì ì—°ìŠµ ê²Œì„</h1>
  <div id="playCount">ì‹œë„ íšŸìˆ˜: 0</div>
  <div id="round">1 / 10 ë¬¸ì œ</div>
  <div id="word">ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤...</div>
  <input type="text" id="inputBox" placeholder="ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off" disabled />
  <div id="result"></div>
  <div id="summary"></div>
  <button id="restartBtn">ğŸ” ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>

  <script>
    const wordList = [
      "ì‚¬ê³¼", "ë°”ë‚˜ë‚˜", "í¬ë„", "ë”¸ê¸°", "ìˆ˜ë°•", "ì°¸ì™¸", "ë³µìˆ­ì•„", "ìë‘", "ì˜¤ë Œì§€", "í‚¤ìœ„",
      "í˜¸ë‘ì´", "ì‚¬ì", "ì½”ë¼ë¦¬", "ê¸°ë¦°", "í† ë¼", "ê°•ì•„ì§€", "ê³ ì–‘ì´", "ì—¬ìš°", "ëŠ‘ëŒ€", "í­ê·„",
      "ì½”ë”©", "ìë°”ìŠ¤í¬ë¦½íŠ¸", "í•¨ìˆ˜", "ì»´í“¨í„°", "í”„ë¡œê·¸ë˜ë°"
    ];

    const wordEl = document.getElementById('word');
    const inputBox = document.getElementById('inputBox');
    const result = document.getElementById('result');
    const summary = document.getElementById('summary');
    const roundDisplay = document.getElementById('round');
    const playCountDisplay = document.getElementById('playCount');
    const restartBtn = document.getElementById('restartBtn');

    let currentWord = '';
    let startTime;
    let totalRounds = 10;
    let currentRound = 0;
    let totalTime = 0;
    let correctCount = 0;
    let wrongCount = 0;
    let playCount = 0;
    let shuffledWords = [];

    // ë°©í•´ê³µì‘ íš¨ê³¼ ë¦¬ìŠ¤íŠ¸
    const distractionEffects = [shakeWordEffect, fakeCursorEffect, blurWordEffect];
    let effectQueue = shuffle([...distractionEffects]);

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }

    function triggerDistractionEffect() {
      if (effectQueue.length === 0) {
        effectQueue = shuffle([...distractionEffects]);
      }
      const effect = effectQueue.shift();
      effectQueue.push(effect);
      effect();
    }

    function shakeWordEffect() {
      wordEl.classList.add('shake');
      setTimeout(() => wordEl.classList.remove('shake'), 400);
    }

    function fakeCursorEffect() {
      const cursor = document.createElement('div');
      cursor.classList.add('fake-cursor');
      document.body.appendChild(cursor);
      setTimeout(() => {
        cursor.style.left = '110%';
      }, 50);
      setTimeout(() => cursor.remove(), 1800);
    }

    function blurWordEffect() {
      wordEl.style.filter = "blur(3px)";
      setTimeout(() => {
        wordEl.style.filter = "none";
      }, 1000);
    }

    function showNewWord() {
      if (currentRound >= totalRounds) {
        showSummary();
        return;
      }

      if (Math.random() < 0.3) {
        setTimeout(triggerDistractionEffect, 700);
      }

      currentWord = shuffledWords[currentRound];
      roundDisplay.textContent = `${currentRound + 1} / ${totalRounds} ë¬¸ì œ`;
      wordEl.textContent = currentWord;
      inputBox.value = '';
      inputBox.disabled = false;
      inputBox.focus();
      startTime = new Date();
    }

    function nextRound(isCorrect) {
      inputBox.disabled = true;
      const endTime = new Date();
      const timeTaken = (endTime - startTime) / 1000;

      if (isCorrect) {
        correctCount++;
        totalTime += timeTaken;
        result.textContent = `âœ… ì •ë‹µ! (${timeTaken.toFixed(2)}ì´ˆ)`;
      } else {
        wrongCount++;
        result.textContent = `âŒ ì˜¤ë‹µ! ì •ë‹µì€ "${currentWord}"`;
      }

      currentRound++;
      setTimeout(() => {
        if (currentRound < totalRounds) {
          wordEl.textContent = 'â³ ë‹¤ìŒ ë‹¨ì–´ ì¤€ë¹„ ì¤‘...';
        }
      }, 300);

      setTimeout(() => {
        showNewWord();
      }, 1500);
    }

    function showSummary() {
      wordEl.textContent = "ğŸ‰ ê²Œì„ ì¢…ë£Œ!";
      inputBox.style.display = "none";
      roundDisplay.style.display = "none";
      restartBtn.style.display = "inline-block";

      const avgTime = correctCount ? (totalTime / correctCount).toFixed(2) : 0;
      summary.innerHTML = `
        <hr>
        <h3>ğŸ“Š ê²°ê³¼ ìš”ì•½</h3>
        <p>ì´ ê²Œì„ íšŸìˆ˜: ${playCount}íšŒ</p>
        <p>ë§ì€ ê°œìˆ˜: ${correctCount}ê°œ</p>
        <p>í‹€ë¦° ê°œìˆ˜: ${wrongCount}ê°œ</p>
        <p>í‰ê·  ì†ë„: ${avgTime}ì´ˆ</p>
      `;
    }

    function resetGame() {
      shuffledWords = shuffle([...wordList]).slice(0, totalRounds);
      currentRound = 0;
      totalTime = 0;
      correctCount = 0;
      wrongCount = 0;

      wordEl.textContent = 'ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤...';
      inputBox.value = '';
      inputBox.style.display = 'inline-block';
      inputBox.disabled = true;
      result.textContent = '';
      summary.innerHTML = '';
      roundDisplay.style.display = 'block';
      restartBtn.style.display = 'none';

      playCount++;
      playCountDisplay.textContent = `ì‹œë„ íšŸìˆ˜: ${playCount}`;

      setTimeout(() => {
        showNewWord();
      }, 1500);
    }

    inputBox.addEventListener('input', () => {
      const input = inputBox.value.trim();
      if (input === currentWord) {
        nextRound(true);
      }
    });

    inputBox.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const input = inputBox.value.trim();
        if (input === currentWord) {
          nextRound(true);
        } else {
          nextRound(false);
        }
      }
    });

    restartBtn.addEventListener('click', resetGame);
    window.onload = resetGame;
  </script>
</body>
</html>
